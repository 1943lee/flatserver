# 青海万格定制组会服务

该服务为青海项目定制，目的是为和万格的系统集成。相当于ezview系统和夜眼系统之间的一个适配器。

## 系统功能:

### 组会（MeetingController.createMeeting）
   接受 ezview 的组会请求，若发现参与会议的设备中有多于1个350M设备，则调用万格系统的接口，将其组成一个组，再发给夜眼系统进行组会。
   否则直接发给夜眼系统进行组会。

### 结会（MeetingController.endMeeting）
   组会的逆操作，但是现在没有被调用，结会是用户在夜眼里面进行操作。


## 注意点

### 数据库摆渡
   和万格之间的交互通过万格的数据库进行，参见文件“VT-3数字集群指挥调度综合解决方案.pdf”

### 组号复用
   万格只提供了9个组号可用，参考`src/script/wange.sql`。
   夜眼提供一个查询会议状态的接口，我们在组会的时候，如果发现组号所属夜眼的会议已经挂断了，就把对应的万格组会也释放掉。
   从而实现对组号的复用

## 遗留问题

### 项目名称
   由于不知道是做一个新的服务，这个服务是基于一个叫做flatserver的服务改的，后来把原服务相关的代码全部删除了，但是名称没有改

### spring boot版本
   历史原因，没有使用最新的spring boot版本

### application.xml 里面的 ${var} 不会被 application.properties 替换的问题
   这就导致我们很不方便支持多个环境，我们至少要支持本地环境加生产环境，这样我们在交付war之前，可以进行一次基本的回归测试。